<%= render  "shared/search_rooms_form" %>

<div class="container room-info-container">
  <div>
    <%= link_to :back, class: "d-flex align-items-center gap-1 mb-4" do %>
      <i class="fa-solid fa-arrow-left"></i>
      前のページに戻る
    <% end %>
  </div>
  <div class="room-info d-flex justify-content-between">
    <% if @room.image.attached? %>
      <%= image_tag @room.image.variant(resize: "400", gravity: "center", crop: "400x300+0+0").processed, class: "room-image" %>
    <% else %>
      <%= image_tag "default_room_image.png", class: "room-image" %>
    <% end %>
    <div class="room-info-contents ms-3">
      <div class="room-info-index d-flex justify-content-between mb-2">
        <p class="room-name"><%= @room.name %></p>
        <p class="room-charge">¥<%= @room.room_charge.to_s(:delimited) %>~</p>
      </div>
      <p class="room-address mb-4"><%= @room.address %></p>
      <p class="mb-4"><%= @room.introduction %></p>
      <div class="reservation-form">
        <%= form_with model: @reservation, url: confirm_reservations_path(@reservation) do |f| %>
          <div class="d-flex justify-content-between gap-3 mb-3 reservation-form-container">
            <div class="reservation-form-contents">
              <%= f.label :check_in, "チェックイン", class: "form-label required-column" %>
              <p>
                <%= f.date_field :check_in, class: "form-control" %>
              </p>
              <% if @reservation.errors.include?(:check_in) %>
                <p class="validation-error-message"><%= @reservation.errors.full_messages_for(:check_in).first %></p>
              <% end %>
            </div>
            <div class="reservation-form-contents">
              <%= f.label :check_out, "チェックアウト", class: "form-label required-column" %>
              <p>
                <%= f.date_field :check_out, class: "form-control" %>
              </p>
              <% if @reservation.errors.include?(:check_out) %>
                <p class="validation-error-message"><%= @reservation.errors.full_messages_for(:check_out).first %></p>
              <% end %>
            </div>
            <div class="reservation-form-contents">
              <%= f.label :person, "人数", class: "form-label required-column" %>
              <p>
                <%= f.text_field :person, class: "form-control", placeholder: "0" %>
              </p>
              <% if @reservation.errors.include?(:person) %>
                <p class="validation-error-message"><%= @reservation.errors.full_messages_for(:person).first %></p>
              <% end %>
            </div>
            <%= f.hidden_field :room_id, value: @room.id %>
          </div>
          <%= f.submit "予約する", class: "btn confirm-btn" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
